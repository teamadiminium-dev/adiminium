<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Pitch Changer | Adiminium Tools</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Fira+Code&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../../css/variables.css">
    <link rel="stylesheet" href="../../css/variables.css">
    <style>
        header {
            padding: 1.5rem 0;
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        footer {
            border-top: 1px solid var(--border-color);
            padding: 3rem 0;
            margin-top: 4rem;
            text-align: center;
            color: var(--text-muted);
        }

        .logo {
            font-weight: 700;
            font-size: 1.5rem;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo span {
            color: var(--primary-color);
            background: var(--primary-dim);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8em;
        }

        .breadcrumb {
            margin: 2rem 0;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .breadcrumb a {
            color: var(--primary-color);
        }

        .tool-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .drop-zone {
            border: 2px dashed var(--border-color);
            border-radius: 16px;
            padding: 3rem;
            text-align: center;
            background: var(--bg-surface);
            transition: 0.2s;
            cursor: pointer;
            margin-bottom: 2rem;
        }

        .controls {
            display: none;
            background: var(--bg-surface);
            padding: 2rem;
            border-radius: 16px;
            border: 1px solid var(--border-color);
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }

        .action-btn {
            background: var(--primary-color);
            color: #000;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: 0.2s;
        }

        .description-section {
            max-width: 800px;
            margin: 4rem auto;
            line-height: 1.8;
            color: var(--text-muted);
        }

        .description-section h2 {
            color: var(--text-main);
            margin-bottom: 1rem;
        }

        .faq-item {
            margin-bottom: 1.5rem;
        }

        .faq-item h4 {
            color: var(--text-main);
            margin-bottom: 0.5rem;
        }
    </style>
</head>

<body>
    <header>
        <div class="container nav-container">
            <a href="../../index.html" class="logo">Adiminium <span>Tools</span></a>

            <div class="search-wrapper">
                <svg class="search-icon" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
                <input type="text" id="global-search" class="search-input" placeholder="Search tool..."
                    autocomplete="off">
                <div id="search-results" class="search-results"></div>
            </div>

            <button onclick="toggleTheme()" aria-label="Toggle theme"
                style="background:none; border:1px solid var(--border-color); padding:0.5rem; border-radius:50%; cursor:pointer; color:var(--text-main); width:40px; height:40px; display:flex; align-items:center; justify-content:center;">
                <svg width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
            </button>
        </div>
    </header>

    <main class="container">
        <div class="breadcrumb">
            <a href="../../index.html">Home</a> / <a href="../index.html">Audio Tools</a> / Pitch Changer
        </div>

        <h1 style="text-align: center; margin-bottom: 2rem;">Audio Pitch Changer</h1>

        <div class="tool-container">
            <div id="drop-zone" class="drop-zone" onclick="document.getElementById('file-input').click()">
                <div style="font-size: 3rem; margin-bottom: 1rem;">ðŸŽ¼</div>
                <p>Click to upload audio</p>
                <input type="file" id="file-input" accept="audio/*" style="display: none;">
            </div>

            <div id="controls" class="controls">
                <div>
                    <label>Pitch Shift: <span id="pitch-val">0</span> cents</label>
                    <input type="range" id="pitch-slider" min="-1200" max="1200" value="0" step="100"
                        style="width:100%; margin:1rem 0">
                    <div style="display:flex; justify-content:space-between; font-size:0.8rem; color:var(--text-muted)">
                        <span>-1 Octave</span>
                        <span>0</span>
                        <span>+1 Octave</span>
                    </div>
                    <p style="font-size:0.8rem; color:var(--text-muted); margin-top:0.5rem">Note: This method currently
                        affects duration (Resampling).</p>
                </div>

                <div style="display:flex; gap:1rem">
                    <button class="action-btn" onclick="preview()">Preview</button>
                    <button class="action-btn" onclick="process()">Download</button>
                    <button onclick="stop()"
                        style="border:none; background:none; color:red; cursor:pointer">Stop</button>
                </div>
                <div id="status" style="color:var(--text-muted)"></div>
            </div>
        </div>

        <section class="description-section">
            <h2>Mastering Audio Pitch: A Detailed Guide</h2>
            <p>The Adiminium Pitch Changer puts professional audio tuning capabilities in your browser. Pitch shifting
                is the process of changing the perceived "note" or "tone" of an audio signal. Whether you are correcting
                a singer who was slightly flat, creating funny voice effects, or tuning a sample to match the key of
                your song, this tool provides precise control over frequency.</p>

            <div class="tip-box"
                style="background: rgba(0, 255, 157, 0.05); border-left: 4px solid var(--primary-color); padding: 1rem 1.5rem; margin: 1.5rem 0; border-radius: 0 8px 8px 0;">
                <strong>Terminology Alert:</strong> "Pitch" refers to how high or low a sound is (Frequency). It is not
                the same as Volume (Loudness) or Speed (Tempo), although they are often related.
            </div>

            <h3>How Pitch is Measured: Semitones and Cents</h3>
            <p>Musicians divide an octave (the distance from one C note to the next higher C) into 12 distinct steps
                called <strong>Semitones</strong>. However, for fine-tuning, we need even smaller units.</p>
            <ul>
                <li><strong>Semitone (Half Step):</strong> The distance between two adjacent keys on a piano.</li>
                <li><strong>Cent:</strong> The standard unit of microtonal pitch. One Semitone = 100 Cents.</li>
                <li><strong>Octave:</strong> 1200 Cents. Doubling the frequency.</li>
            </ul>
            <p>Our tool uses <strong>Cents</strong> for maximum precision. A value of +100 shifts the pitch up by one
                piano key. A value of -50 shifts it down by a quarter-tone (often used in Middle Eastern or Blues
                music).</p>

            <h3>Common Use Cases</h3>
            <ol>
                <li><strong>Vocal Tuning:</strong> While not a full Auto-Tune suite, slight adjustments (+/- 20 cents)
                    can fix a vocal performance that feels slightly "off" or flat.</li>
                <li><strong>Beat Making (Sampling):</strong> Producers often sample old records. To make a sample fit
                    the key of a new beat, you might need to pitch it up or down by 200-300 cents.</li>
                <li><strong>Voice Anonymity:</strong> Pitching a voice down by -300 to -500 cents creates a deep,
                    disguised voice often used in documentaries or privacy interviews.</li>
                <li><strong>Chipmunk Effect:</strong> Pitching up by +600 cents or more creates the classic high-pitched
                    cartoon voice.</li>
                <li><strong>Gender Swapping:</strong> Subtle shifts (+/- 150 cents) can sometimes make a male voice
                    sound more feminine or vice versa, though formants (throat resonance) play a role here too.</li>
            </ol>

            <h3>The Science Behind It</h3>
            <p>This tool currently uses a technique called <strong>Resampling</strong> with Detuning. By playing the
                audio faster or slower at a micro-level, we alter the wavelength.</p>
            <ul>
                <li><strong>Formula:</strong> <code>New Frequency = Original Frequency * 2^(cents/1200)</code></li>
            </ul>
            <p>Note that because we are resampling, this method affects the <strong>playback speed</strong> inversely.
                Pitching UP makes the audio slightly shorter. Pitching DOWN makes it longer. This is identical to how
                tape machines works. We are developing a Phase-Vocoder engine to enable independent pitch shifting in
                the future!</p>

            <h3>User Guide</h3>
            <ul>
                <li><strong>Fine Tuning:</strong> Use small values (+/- 50 cents) for subtle corrections.</li>
                <li><strong>Key Changes:</strong> Use 100-cent increments for musical key changes. (+200 cents = Whole
                    Step UP).</li>
                <li><strong>Extreme FX:</strong> Max out the slider to +/- 1200 for sound design and alien effects.</li>
            </ul>

            <h3>Frequently Asked Questions</h3>
            <div class="faq-item">
                <h4>Does this work on all audio files?</h4>
                <p>It works best on monophonic (single note) sources like a voice or a solo violin. On complex songs
                    (polyphonic), it shifts everythingâ€”drums, bass, and vocalsâ€”which can sound unnatural but artistic.
                </p>
            </div>

            <div class="faq-item">
                <h4>Can I customize the range?</h4>
                <p>Currently, the slider is capped at +/- 1200 cents (1 octave) to preserve audio integrity. Shifts
                    beyond 1 octave often degrade quality significantly.</p>
            </div>

            <div class="faq-item">
                <h4>Why did my file get shorter?</h4>
                <p>As mentioned in the Science section, pitch and time are linked in basic physics. Higher pitch =
                    Higher frequency = Faster vibration = Shorter duration. To keep duration constant requires heavy
                    computational "Time Stretching".</p>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div style="margin-bottom: 1rem;">
                <a href="https://adiminium.com/privacy.html" style="margin: 0 1rem;">Privacy Policy</a>
                <a href="https://adiminium.com/terms.html" style="margin: 0 1rem;">Terms & Conditions</a>
                <a href="https://adiminium.com/contact.html" style="margin: 0 1rem;">Contact Us</a>
            </div>
            <p>&copy; 2026 Adiminium. All rights reserved.</p>
        </div>
    </footer>


    <script src="../../js/theme.js"></script>
    <script src="../../js/search.js"></script>
    <script src="../../js/particles.js"></script>
    <script>
        const fileInput = document.getElementById('file-input');
        const controls = document.getElementById('controls');
        const pitchSlider = document.getElementById('pitch-slider');
        const pitchVal = document.getElementById('pitch-val');
        const status = document.getElementById('status');

        let audioCtx;
        let file;
        let sourceNode;

        fileInput.addEventListener('change', (e) => {
            if (e.target.files[0]) {
                file = e.target.files[0];
                document.getElementById('drop-zone').style.display = 'none';
                controls.style.display = 'flex';
            }
        });

        pitchSlider.addEventListener('input', () => pitchVal.textContent = pitchSlider.value);

        async function getBuffer() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const arr = await file.arrayBuffer();
            return await audioCtx.decodeAudioData(arr);
        }

        async function preview() {
            stop();
            const buffer = await getBuffer();
            sourceNode = audioCtx.createBufferSource();
            sourceNode.buffer = buffer;
            sourceNode.detune.value = parseFloat(pitchSlider.value);
            sourceNode.connect(audioCtx.destination);
            sourceNode.start();
        }

        function stop() {
            if (sourceNode) {
                try { sourceNode.stop(); } catch (e) { }
            }
        }

        async function process() {
            stop();
            status.textContent = "Processing...";
            const buffer = await getBuffer();
            const cents = parseFloat(pitchSlider.value);

            // Calculate rate change from cents
            // rate = 2^(cents/1200)
            const rate = Math.pow(2, cents / 1200);

            // Resampling changes duration inverse to rate
            const newLength = Math.ceil(buffer.length / rate);

            const offlineCtx = new OfflineAudioContext(buffer.numberOfChannels, newLength, buffer.sampleRate);
            const source = offlineCtx.createBufferSource();
            source.buffer = buffer;
            source.detune.value = cents;
            source.connect(offlineCtx.destination);
            source.start();

            const rendered = await offlineCtx.startRendering();
            const blob = bufferToWav(rendered);
            const url = URL.createObjectURL(blob);

            const a = document.createElement('a');
            a.href = url;
            a.download = `pitch_${cents}_${file.name.replace(/\.[^.]+$/, '')}.wav`;
            a.click();
            status.textContent = "Done!";
        }

        function bufferToWav(abuffer) {
            const numOfChan = abuffer.numberOfChannels;
            const length = abuffer.length * numOfChan * 2 + 44;
            const buffer = new ArrayBuffer(length);
            const view = new DataView(buffer);
            const channels = [];
            let i, sample, offset = 0, pos = 0;

            setUint32(0x46464952); // RIFF
            setUint32(length - 8);
            setUint32(0x45564157); // WAVE
            setUint32(0x20746d66); // fmt 
            setUint32(16);
            setUint16(1);
            setUint16(numOfChan);
            setUint32(abuffer.sampleRate);
            setUint32(abuffer.sampleRate * 2 * numOfChan);
            setUint16(numOfChan * 2);
            setUint16(16);
            setUint32(0x61746164); // data
            setUint32(length - pos - 4);

            for (i = 0; i < numOfChan; i++) channels.push(abuffer.getChannelData(i));

            while (pos < abuffer.length) {
                for (i = 0; i < numOfChan; i++) {
                    sample = Math.max(-1, Math.min(1, channels[i][pos]));
                    sample = (0.5 + sample < 0 ? sample * 32768 : sample * 32767) | 0;
                    view.setInt16(44 + offset, sample, true);
                    offset += 2;
                }
                pos++;
            }
            return new Blob([buffer], { type: "audio/wav" });
            function setUint16(d) { view.setUint16(pos, d, true); pos += 2; }
            function setUint32(d) { view.setUint32(pos, d, true); pos += 4; }
        }
    </script>
</body>

</html>